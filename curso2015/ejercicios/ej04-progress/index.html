<!DOCTYPE html>
<html lang="es">
<head>

	<meta charset="UTF-8">
	<title>Ejercicio: ej04-progress [05.11.15]</title>

    <!-- Estilos -->
	<style>
		mark {
			background:lime;
		}
		time {
			color: red;
		}
		div {
			color:#0000FF;
			width: 500px;
		}
	</style>

    <!-- Scripts -->
	<script>
		function start() {
			//Aqui escribiremos nuestro codigo JavaScript
			var barraProgreso = document.getElementById("barraProgreso");
			var btnEjecutar = document.getElementById("btnEjecutar");
			var spanResultado = document.getElementById("txtResultado"); 

			barraProgreso.value = 0;

			btnEjecutar.disabled = true; 
			btnEjecutar.value = "Ejecutando...";

			var refreshIntervalId = setInterval(function() {
				//En cada ejecucion se comprueba si hemos llegado al 100%, //si no es asi, sumamos 1 y seguimos:
				if (barraProgreso.value < 100){
					barraProgreso.value = barraProgreso.value + 1;
				} else {
					//En caso contrario, habilitamos el boton de ejecucion y //modificamos su texto:
					btnEjecutar.disabled = false;
					btnEjecutar.value = "Ejecutar de nuevo";
					//Detenemos la ejecucion de setInterval: clearInterval(refreshIntervalId);
				}
				txtResultado.innerHTML = barraProgreso.value + "%"; }, 50);
			}
	</script>


</head>
<body>


    <!-- Formulario -->
    <form>
		<input id="btnEjecutar" type="button" value="Ejecutar" onclick="start();" /> <progress id="barraProgreso" value="0" max="100"></progress>
		<span id="txtResultado" />
	</form>
	
	<!-- Footer -->
	<address>
	Web desarrollada <time>2015-11-05 13:58</time> por <a href="mailto:jcheca@uco.es">Jos√© Checa Claudel</a>.<br>
	<a href="http://www.uco.es" target="_blank">Universidad de C&oacute;rdoba</a>, Espa&ntilde;a
	</address>

</body>
</html>