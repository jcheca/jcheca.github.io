<!DOCTYPE html>
<html lang="es">
<head>

	<meta charset="UTF-8">
	<title>Ejercicio: ej04-progress [05.11.15]</title>

    <!-- Scripts -->
	<script>

		// Variables Globales
		var sw = 0;

		// Inicio del progreso
		function start() {

			var barraProgreso = document.getElementById("barraProgreso");
			var btnEjecutar = document.getElementById("btnEjecutar");
			var spanResultado = document.getElementById("txtResultado"); 

			// Inicio del valor a 0 del progreso.
			if (btnEjecutar.value == "Ejecutar de nuevo") { barraProgreso.value = 0;}

			// Switch Parar/Continuar
			if (sw == 0) {
				sw = 1;
				btnEjecutar.value = " Parar    ";
			} else {
				sw=0;
				btnEjecutar.value = " Continuar";
			}
			
			// Progreso.
			var refreshIntervalId = setInterval(function() {
				if (barraProgreso.value < 100){
					if (sw == 1){
						barraProgreso.value = barraProgreso.value + 1;
					} else {
						barraProgreso.value = barraProgreso.value;
					}
				} else {
					btnEjecutar.value = "Ejecutar de nuevo";
					sw = 0;
				}
				spanResultado.innerHTML = barraProgreso.value + "%"; 
			}, 100);
		    
		}
	</script>


</head>
<body>


	<h1>Barra de progreso HTML5</h1>
    <!-- Formulario -->
    <form>

			<input id="btnEjecutar" type="button" value="Ejecutar" onclick="start();" /> 
			<progress id="barraProgreso" value="0" max="100"></progress>
			<span id="txtResultado" />

	</form>
	


</body>
</html>